<!DOCTYPE html>
<html>
<head>
  <title>ìºì‹œ ì™„ì „ ì‚­ì œ</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
    }
    button {
      padding: 12px 24px;
      font-size: 16px;
      background: #0070f3;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 10px 0;
    }
    button:hover {
      background: #0051cc;
    }
    #log {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 6px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 12px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>ğŸ§¹ ìºì‹œ ì™„ì „ ì‚­ì œ</h1>
  <p>OAuth ë¡œê·¸ì¸ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤.</p>
  
  <button onclick="clearAll()">ì „ì²´ ìºì‹œ ì‚­ì œ</button>
  <button onclick="testAuth()">ìºì‹œ ì‚­ì œ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ</button>
  
  <div id="log"></div>

  <script>
    const log = (msg) => {
      const logEl = document.getElementById('log');
      logEl.textContent += msg + '\n';
      console.log(msg);
    };

    async function clearAll() {
      log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      log('ğŸ§¹ ìºì‹œ ì‚­ì œ ì‹œì‘...');
      
      // 1. LocalStorage
      try {
        localStorage.clear();
        log('âœ… localStorage ì‚­ì œ');
      } catch (e) {
        log('âŒ localStorage ì‚­ì œ ì‹¤íŒ¨: ' + e.message);
      }
      
      // 2. SessionStorage
      try {
        sessionStorage.clear();
        log('âœ… sessionStorage ì‚­ì œ');
      } catch (e) {
        log('âŒ sessionStorage ì‚­ì œ ì‹¤íŒ¨: ' + e.message);
      }
      
      // 3. Service Workers
      try {
        const registrations = await navigator.serviceWorker.getRegistrations();
        log(`ğŸ“¦ Service Workers: ${registrations.length}ê°œ ë°œê²¬`);
        for (const registration of registrations) {
          await registration.unregister();
          log(`âœ… Service Worker ì‚­ì œ: ${registration.scope}`);
        }
      } catch (e) {
        log('âŒ Service Worker ì‚­ì œ ì‹¤íŒ¨: ' + e.message);
      }
      
      // 4. Cache Storage
      try {
        const cacheNames = await caches.keys();
        log(`ğŸ“¦ Caches: ${cacheNames.length}ê°œ ë°œê²¬`);
        for (const name of cacheNames) {
          await caches.delete(name);
          log(`âœ… Cache ì‚­ì œ: ${name}`);
        }
      } catch (e) {
        log('âŒ Cache ì‚­ì œ ì‹¤íŒ¨: ' + e.message);
      }
      
      // 5. Cookies
      try {
        const cookies = document.cookie.split(';');
        log(`ğŸª Cookies: ${cookies.length}ê°œ ë°œê²¬`);
        for (const cookie of cookies) {
          const name = cookie.split('=')[0].trim();
          document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/';
          log(`âœ… Cookie ì‚­ì œ: ${name}`);
        }
      } catch (e) {
        log('âŒ Cookie ì‚­ì œ ì‹¤íŒ¨: ' + e.message);
      }
      
      log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
      log('âœ… ìºì‹œ ì‚­ì œ ì™„ë£Œ!');
      log('âš ï¸  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë¸Œë¼ìš°ì €ë¥¼ ì¬ì‹œì‘í•˜ì„¸ìš”.');
    }

    async function testAuth() {
      await clearAll();
      log('ğŸ”„ 3ì´ˆ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™...');
      setTimeout(() => {
        window.location.href = '/signin';
      }, 3000);
    }
  </script>
</body>
</html>

